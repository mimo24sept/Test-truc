<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roulette Royale</title>
  <style>
    :root {
      --table: #0b3b2e;
      --felt: linear-gradient(135deg, #0f5132 0%, #0c3826 60%, #0f5132 100%);
      --gold: #d8b55c;
      --shadow: rgba(0, 0, 0, 0.35);
      --chip-red: #c0392b;
      --chip-black: #111;
      --chip-green: #1fa971;
      --text: #f4f1e6;
      --muted: #9fb2a5;
      --card: rgba(8, 26, 20, 0.7);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at 20% 20%, rgba(216, 181, 92, 0.15), transparent 35%),
                  radial-gradient(circle at 80% 0%, rgba(216, 181, 92, 0.12), transparent 30%),
                  var(--felt);
      color: var(--text);
      font-family: 'Bodoni MT', 'Didot', 'Palatino', serif;
    }

    .layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 18px;
      padding: 26px;
    }

    .table {
      background: var(--card);
      border: 1px solid rgba(216, 181, 92, 0.35);
      border-radius: 18px;
      box-shadow: 0 16px 40px var(--shadow);
      padding: 22px;
      backdrop-filter: blur(4px);
      position: relative;
      overflow: hidden;
    }

    .table::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 30%, rgba(216, 181, 92, 0.08), transparent 35%),
                  radial-gradient(circle at 80% 50%, rgba(216, 181, 92, 0.06), transparent 30%);
      pointer-events: none;
    }

    .table-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }

    h1 {
      margin: 0;
      letter-spacing: 0.08em;
      font-size: 1.8rem;
    }

    .credits {
      font-size: 1.15rem;
      background: rgba(12, 56, 38, 0.7);
      border: 1px solid rgba(216, 181, 92, 0.35);
      padding: 10px 16px;
      border-radius: 12px;
      box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.25);
    }

    .status {
      background: rgba(12, 56, 38, 0.9);
      border: 1px solid rgba(216, 181, 92, 0.25);
      border-radius: 12px;
      padding: 12px 14px;
      margin-bottom: 14px;
      min-height: 52px;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      z-index: 1;
    }

    .status .indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      box-shadow: 0 0 0 2px rgba(0,0,0,0.2);
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }

    .control {
      background: rgba(0, 0, 0, 0.25);
      border: 1px solid rgba(216, 181, 92, 0.25);
      padding: 12px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label {
      color: var(--muted);
      font-size: 0.9rem;
      letter-spacing: 0.03em;
    }

    input, select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(216, 181, 92, 0.3);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      font-size: 1rem;
    }

    .bet-colors {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 8px;
    }

    .chip {
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 14px;
      padding: 12px;
      color: #f8f8f8;
      text-align: center;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.1s ease, border 0.15s ease;
      box-shadow: inset 0 -3px 0 rgba(0,0,0,0.25), 0 8px 12px rgba(0,0,0,0.35);
    }

    .chip[data-color="red"] { background: linear-gradient(145deg, #e44636, #9f1f14); }
    .chip[data-color="black"] { background: linear-gradient(145deg, #222, #0b0b0b); }
    .chip[data-color="green"] { background: linear-gradient(145deg, #2fc485, #0f6b46); }

    .chip.active {
      transform: translateY(-2px);
      border: 1px solid rgba(216, 181, 92, 0.75);
      box-shadow: inset 0 -3px 0 rgba(0,0,0,0.35), 0 12px 18px rgba(0,0,0,0.45);
    }

    .actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 4px;
    }

    button {
      border: none;
      border-radius: 12px;
      padding: 12px 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      color: #0b0b0b;
      transition: transform 0.08s ease, box-shadow 0.12s ease;
    }

    button:active { transform: translateY(1px); }

    .primary {
      background: linear-gradient(135deg, #f0d782, #d6b54b);
      box-shadow: 0 10px 18px rgba(216, 181, 92, 0.35);
    }

    .ghost {
      background: rgba(255,255,255,0.08);
      color: var(--text);
      border: 1px solid rgba(216, 181, 92, 0.3);
      box-shadow: 0 10px 18px rgba(0,0,0,0.35);
    }

    .stage {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 14px;
      align-items: center;
      position: relative;
      z-index: 1;
    }

    .wheel-wrap {
      background: radial-gradient(circle at 50% 40%, rgba(216, 181, 92, 0.12), rgba(0,0,0,0.3));
      border-radius: 50%;
      padding: 14px;
      display: grid;
      place-items: center;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.35), 0 12px 24px rgba(0,0,0,0.35);
    }

    .wheel {
      width: 260px;
      height: 260px;
      border-radius: 50%;
      background: conic-gradient(
        #e84639 0deg 9.73deg, #101010 9.73deg 19.46deg,
        #e84639 19.46deg 29.19deg, #101010 29.19deg 38.92deg,
        #e84639 38.92deg 48.65deg, #101010 48.65deg 58.38deg,
        #e84639 58.38deg 68.11deg, #101010 68.11deg 77.84deg,
        #e84639 77.84deg 87.57deg, #101010 87.57deg 97.3deg,
        #e84639 97.3deg 107.03deg, #101010 107.03deg 116.76deg,
        #e84639 116.76deg 126.49deg, #101010 126.49deg 136.22deg,
        #e84639 136.22deg 145.95deg, #101010 145.95deg 155.68deg,
        #e84639 155.68deg 165.41deg, #101010 165.41deg 175.14deg,
        #26a96c 175.14deg 184.87deg,
        #e84639 184.87deg 194.6deg, #101010 194.6deg 204.33deg,
        #e84639 204.33deg 214.06deg, #101010 214.06deg 223.79deg,
        #e84639 223.79deg 233.52deg, #101010 233.52deg 243.25deg,
        #e84639 243.25deg 252.98deg, #101010 252.98deg 262.71deg,
        #e84639 262.71deg 272.44deg, #101010 272.44deg 282.17deg,
        #e84639 282.17deg 291.9deg, #101010 291.9deg 301.63deg,
        #e84639 301.63deg 311.36deg, #101010 311.36deg 321.09deg,
        #e84639 321.09deg 330.82deg, #101010 330.82deg 340.55deg,
        #e84639 340.55deg 350.28deg, #101010 350.28deg 360deg
      );
      position: relative;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.45);
      transition: transform 1s cubic-bezier(0.25, 0.9, 0.4, 1);
    }

    .wheel::after {
      content: "";
      position: absolute;
      inset: 18%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0,0,0,0.3), rgba(0,0,0,0.75));
      box-shadow: inset 0 0 8px rgba(0,0,0,0.45);
    }

    .pin {
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      width: 18px;
      height: 36px;
      background: linear-gradient(180deg, #f5e7b1, #b9862c);
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      box-shadow: 0 6px 14px rgba(0,0,0,0.45);
      z-index: 2;
    }

    .outcome {
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(216, 181, 92, 0.3);
      border-radius: 12px;
      padding: 14px;
      min-height: 140px;
      display: grid;
      gap: 8px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.35);
    }

    .badge {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 0.95rem;
      border: 1px solid rgba(255,255,255,0.12);
    }

    .badge.red { background: rgba(228, 70, 54, 0.22); color: #f7c5bf; }
    .badge.black { background: rgba(0,0,0,0.35); color: #dcdcdc; }
    .badge.green { background: rgba(47, 196, 133, 0.25); color: #c9f1de; }

    .history {
      background: var(--card);
      border: 1px solid rgba(216, 181, 92, 0.35);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 16px 40px var(--shadow);
      backdrop-filter: blur(4px);
      position: relative;
      overflow: hidden;
    }

    .history h2 {
      margin: 0 0 12px 0;
      letter-spacing: 0.07em;
    }

    .history-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
      max-height: 440px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .history-item {
      background: rgba(0,0,0,0.2);
      border: 1px solid rgba(216, 181, 92, 0.25);
      border-radius: 12px;
      padding: 10px 12px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items: center;
    }

    .pip {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .small {
      color: var(--muted);
      font-size: 0.92rem;
    }

    @media (max-width: 960px) {
      .layout { grid-template-columns: 1fr; }
      .controls { grid-template-columns: 1fr; }
      .stage { grid-template-columns: 1fr; }
      .wheel { width: 220px; height: 220px; }
    }
  </style>
</head>
<body>
  <div class="layout">
    <section class="table">
      <div class="table-header">
        <h1>Roulette Royale</h1>
        <div class="credits" id="credits">Crédits : 10 000</div>
      </div>

      <div class="status" id="status">
        <div class="indicator" id="status-indicator" style="background:#888;"></div>
        <div id="status-text">Placez votre mise et tournez la roue.</div>
      </div>

      <div class="controls">
        <div class="control">
          <label for="bet-amount">Montant de la mise</label>
          <input id="bet-amount" type="number" min="1" value="100">
        </div>

        <div class="control">
          <label for="bet-type">Type de mise</label>
          <select id="bet-type">
            <option value="color">Couleur (x2 / x14 sur 0)</option>
            <option value="number">Numéro plein (x36)</option>
          </select>
        </div>

        <div class="control" id="color-picker">
          <label>Choisissez une couleur</label>
          <div class="bet-colors">
            <div class="chip" data-color="red">Rouge</div>
            <div class="chip" data-color="black">Noir</div>
            <div class="chip" data-color="green">Zéro</div>
          </div>
        </div>

        <div class="control" id="number-picker" style="display:none;">
          <label for="bet-number">Numéro (0 - 36)</label>
          <input id="bet-number" type="number" min="0" max="36" placeholder="Ex: 17">
        </div>
      </div>

      <div class="actions">
        <button class="primary" id="spin">Lancer la roue</button>
        <button class="ghost" id="reset">Reset à 10 000</button>
      </div>

      <div class="stage">
        <div class="wheel-wrap">
          <div class="pin"></div>
          <div class="wheel" id="wheel"></div>
        </div>

        <div class="outcome">
          <div class="small">Dernier résultat</div>
          <div id="outcome-number" class="badge black">-</div>
          <div id="outcome-summary" class="small">En attente...</div>
        </div>
      </div>
    </section>

    <aside class="history">
      <h2>Historique</h2>
      <ul class="history-list" id="history-list"></ul>
    </aside>
  </div>

  <script>
    const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
    const creditsEl = document.getElementById('credits');
    const betAmountEl = document.getElementById('bet-amount');
    const betTypeEl = document.getElementById('bet-type');
    const betNumberEl = document.getElementById('bet-number');
    const chips = Array.from(document.querySelectorAll('.chip'));
    const statusText = document.getElementById('status-text');
    const statusIndicator = document.getElementById('status-indicator');
    const wheel = document.getElementById('wheel');
    const outcomeNumber = document.getElementById('outcome-number');
    const outcomeSummary = document.getElementById('outcome-summary');
    const historyList = document.getElementById('history-list');

    let credits = 10000;
    let lastSpin = 0;

    const formatCredits = (value) => value.toLocaleString('fr-FR');

    const getColor = (number) => {
      if (number === 0) return 'green';
      return redNumbers.includes(number) ? 'red' : 'black';
    };

    const setStatus = (text, color) => {
      statusText.textContent = text;
      statusIndicator.style.background = color;
    };

    const updateCredits = () => {
      creditsEl.textContent = `Crédits : ${formatCredits(credits)}`;
    };

    const setActiveChip = (color) => {
      chips.forEach(chip => chip.classList.toggle('active', chip.dataset.color === color));
    };

    const addHistory = ({ number, color, bet, win, creditsLeft, betLabel }) => {
      const item = document.createElement('li');
      item.className = 'history-item';

      const pip = document.createElement('div');
      pip.className = 'pip';
      pip.style.background = color === 'red' ? '#e84639' : color === 'black' ? '#0b0b0b' : '#2fc485';

      const desc = document.createElement('div');
      desc.innerHTML = `<strong>${number}</strong> (${color}) • ${betLabel}`;

      const gain = document.createElement('div');
      const sign = win >= 0 ? '+' : '-';
      gain.textContent = `${sign}${Math.abs(win).toLocaleString('fr-FR')} cr.`;
      gain.style.color = win >= 0 ? '#d8b55c' : '#f28585';
      gain.title = `Solde: ${formatCredits(creditsLeft)}`;

      item.append(pip, desc, gain);
      historyList.prepend(item);
    };

    const spinWheel = () => {
      const bet = Number(betAmountEl.value);
      if (!Number.isFinite(bet) || bet <= 0) {
        setStatus('Mise invalide.', '#f28585');
        return;
      }
      if (bet > credits) {
        setStatus('Pas assez de crédits pour cette mise.', '#f28585');
        return;
      }

      const betType = betTypeEl.value;
      let betColor = chips.find(chip => chip.classList.contains('active'))?.dataset.color;
      let betNumber = Number(betNumberEl.value);

      if (betType === 'color' && !betColor) {
        setStatus('Choisissez une couleur.', '#f28585');
        return;
      }
      if (betType === 'number') {
        if (!Number.isInteger(betNumber) || betNumber < 0 || betNumber > 36) {
          setStatus('Numéro entre 0 et 36 obligatoire.', '#f28585');
          return;
        }
      }

      credits -= bet;
      updateCredits();

      const number = Math.floor(Math.random() * 37);
      lastSpin = (lastSpin + 1) % 24;
      const spinDeg = 720 + number * 9.73 + lastSpin * 4;
      wheel.style.transform = `rotate(${spinDeg}deg)`;

      const color = getColor(number);
      let payout = 0;
      let label;

      if (betType === 'color') {
        label = `Mise couleur ${betColor}`;
        if (betColor === color) {
          payout = betColor === 'green' ? bet * 14 : bet * 2;
        }
      } else {
        label = `Mise numéro ${betNumber}`;
        if (betNumber === number) {
          payout = bet * 36;
        }
      }

      credits += payout;
      updateCredits();

      const net = payout - bet;
      const gainText = net >= 0 ? `Vous gagnez ${formatCredits(net)} crédits !` : `Perdu ${formatCredits(Math.abs(net))} crédits.`;
      setStatus(`${gainText} Résultat: ${number} (${color}).`, net >= 0 ? '#d8b55c' : '#f28585');

      outcomeNumber.textContent = number;
      outcomeNumber.className = `badge ${color}`;
      outcomeSummary.textContent = `${color === 'green' ? 'Zéro' : 'Couleur ' + color} • ${label}`;

      addHistory({ number, color, bet, win: net, creditsLeft: credits, betLabel: label });
    };

    const resetGame = () => {
      credits = 10000;
      updateCredits();
      historyList.innerHTML = '';
      setStatus('Crédits remis à 10 000. Bonne chance !', '#d8b55c');
      outcomeNumber.textContent = '-';
      outcomeNumber.className = 'badge black';
      outcomeSummary.textContent = 'En attente...';
      wheel.style.transform = 'rotate(0deg)';
    };

    betTypeEl.addEventListener('change', () => {
      const isColor = betTypeEl.value === 'color';
      document.getElementById('color-picker').style.display = isColor ? 'block' : 'none';
      document.getElementById('number-picker').style.display = isColor ? 'none' : 'block';
    });

    chips.forEach(chip => {
      chip.addEventListener('click', () => setActiveChip(chip.dataset.color));
    });

    document.getElementById('spin').addEventListener('click', spinWheel);
    document.getElementById('reset').addEventListener('click', resetGame);

    setActiveChip('red');
    setStatus('Placez votre mise et tournez la roue.', '#888');
  </script>
</body>
</html>
